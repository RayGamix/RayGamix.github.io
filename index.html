<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>RayGamix Launcher</title>
<style>
:root{--bg:#000;--panel:#071018;--card:#111;--muted:#9aa;--accent:#00b7ff;--accent-2:#0c6;--glass:rgba(255,255,255,0.03);--gap:16px;color-scheme:dark}html,body{height:100%;margin:0;background:var(--bg);color:#fff;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}.app{display:grid;grid-template-columns:220px 1fr 420px;grid-template-rows:72px 1fr;gap:var(--gap);height:100vh;padding:18px;box-sizing:border-box;align-items:start}.sidebar{grid-row:1/span 2;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border-radius:12px;padding:18px;display:flex;flex-direction:column;gap:12px;align-items:center}.create-btn{writing-mode:vertical-rl;transform:rotate(180deg);background:linear-gradient(180deg,var(--accent),#0077aa);color:#fff;padding:12px 10px;border-radius:10px;cursor:pointer;font-weight:600;text-decoration:none;box-shadow:0 6px 18px rgba(0,0,0,0.6)}.topbar{grid-column:2/4;height:72px;display:flex;align-items:center;gap:12px;padding:0 8px}.logo{width:11.5%;border-radius:8px;object-fit:contain}.search{flex:1;display:flex;align-items:center;gap:8px;background:var(--glass);padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}.search input{background:transparent;border:0;outline:none;color:#fff;font-size:15px;width:100%}.nav-icons{display:flex;gap:10px;align-items:center}.nav-icon{padding:8px;border-radius:8px;background:rgba(255,255,255,0.02);cursor:pointer;font-size:13px;color:var(--muted)}.main{grid-column:2/3;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border-radius:12px;padding:18px;overflow:auto}.tabs{display:flex;gap:10px;margin-bottom:14px}.tab{padding:8px 12px;border-radius:8px;background:rgba(255,255,255,0.02);cursor:pointer;color:var(--muted)}.tab.active{background:linear-gradient(90deg,var(--accent),#0077aa);color:#fff;font-weight:600}.btn{padding:8px 12px;border-radius:8px;background:rgba(255,255,255,0.03);cursor:pointer;color:var(--muted);border:1px solid rgba(255,255,255,0.02)}.btn.primary{background:var(--accent);color:#000;font-weight:700;border:none}.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px}.card{background:var(--card);border-radius:12px;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 6px 18px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.02)}.thumb{width:100%;height:140px;object-fit:cover;background:linear-gradient(180deg,#0b2a3a,#04202a)}.card-body{padding:12px;display:flex;gap:12px;align-items:center}.card-info{flex:1}.card-title{font-size:1.05rem;font-weight:700;margin-bottom:6px}.card-sub{color:var(--muted);font-size:.85rem;margin-bottom:8px}.card-actions{display:flex;gap:8px;align-items:center}.play{background:var(--accent);color:#000;padding:8px 12px;border-radius:8px;cursor:pointer;border:none;font-weight:700}.info{background:rgba(255,255,255,0.03);color:var(--muted);padding:8px 10px;border-radius:8px;cursor:pointer;border:1px solid rgba(255,255,255,0.02)}.right{grid-column:3/4;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border-radius:12px;padding:12px;display:flex;flex-direction:column;gap:12px}.play-frame{flex:1;border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);background:#000}.play-frame iframe{width:100%;height:100%;border:0;display:block}.status-line{color:var(--muted);font-size:.95rem}footer{grid-column:1/-1;text-align:center;color:var(--muted);margin-top:12px;font-size:.85rem}@media(max-width:1100px){.app{grid-template-columns:80px 1fr;grid-template-rows:72px 1fr 420px}.right{grid-column:1/-1;grid-row:3/4}.topbar{grid-column:2/3}.sidebar{grid-row:1/2}}
</style>
</head>
<body>
<div class="app">
  <div class="sidebar"><a class="create-btn" href="#" onclick="createGame()"></a></div>
  <div class="topbar">
    <img class="logo" src="https://raygamix.github.io/logo.png" alt="logo">
    <div class="search"><img src="https://raygamix.github.io/search.png" alt="Search Icon"><path d="M21 21l-4.35-4.35" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg><input id="searchInput" oninput="applyFilters()"/></div>
    <div class="nav-icons" style="margin-left:12px"><div class="nav-icon" onclick="goHome()"></div><div class="nav-icon" onclick="forYou()"></div><div class="nav-icon" onclick="openSettings()"></div></div>
    <select id="languageSelect" onchange="setLanguage(this.value)" style="margin-left:12px;background:#111;color:#fff;border:1px solid #333;padding:6px;border-radius:6px">
      <option value="enUS">ğŸŒğŸ—£ï¸ English (US)</option>
      <option value="enUK">ğŸŒğŸ—£ï¸ English (UK)</option>
      <option value="de">ğŸŒğŸ—£ï¸ German</option>
      <option value="fa">ğŸŒğŸ—£ï¸ Persian</option>
      <option value="th">ğŸŒğŸ—£ï¸ Thai</option>
      <option value="hi">ğŸŒğŸ—£ï¸ Hindi</option>
      <option value="zh">ğŸŒğŸ—£ï¸ Chinese</option>
      <option value="ko">ğŸŒğŸ—£ï¸ Korean</option>
      <option value="ja">ğŸŒğŸ—£ï¸ Japanese</option>
      <option value="nl">ğŸŒğŸ—£ï¸ Dutch</option>
      <option value="nlBE">ğŸŒğŸ—£ï¸ Dutch (Belgium)</option>
      <option value="es">ğŸŒğŸ—£ï¸ Spanish</option>
      <option value="fr">ğŸŒğŸ—£ï¸ French</option>
      <option value="it">ğŸŒğŸ—£ï¸ Italian</option>
      <option value="pt">ğŸŒğŸ—£ï¸ Portuguese</option>
      <option value="ru">ğŸŒğŸ—£ï¸ Russian</option>
    </select>
  </div>
  <div class="main">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
      <div style="display:flex;gap:12px;align-items:center">
        <div class="tabs">
          <div class="tab active" data-cat="all" onclick="setCategory('all',this)"></div>
          <div class="tab" data-cat="multiplayer" onclick="setCategory('multiplayer',this)"></div>
          <div class="tab" data-cat="singleplayer" onclick="setCategory('singleplayer',this)"></div>
          <div class="tab" data-cat="your" onclick="setCategory('your',this)"></div>
        </div>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <div class="btn" onclick="startScan()"></div>
        <div class="btn" onclick="stopScan()"></div>
        <div class="btn primary" onclick="loadMore()"></div>
      </div>
    </div>
    <div class="status-line" id="scanStatus"></div>
    <div class="grid" id="grid"></div>
  </div>
  <div class="right">
    <div style="display:flex;justify-content:space-between;align-items:center"><div style="font-weight:700">Play Area</div><div class="status-line" id="rightStatus">No world loaded</div></div>
    <div class="play-frame" id="playFrame" style="height:100%;"></div>
  </div>
  <footer id="footer"></footer>
</div>

<script>
const BACKEND_URL='N/A',MAX_ID=999999999;let scanning=false,concurrency=8,triesPerBatch=40,discovered=new Map(),activeCategory='all',searchQuery='',currentLang='enUS';
const grid=document.getElementById('grid'),scanStatus=document.getElementById('scanStatus'),rightStatus=document.getElementById('rightStatus'),footer=document.getElementById('footer');
const translations={
enUS:{create:"Create",search:"Search...",home:"Home",foryou:"For You",settings:"Settings",all:"All",multiplayer:"Multiplayer",singleplayer:"Singleplayer",your:"Your",discover:"Discover",stop:"Stop",load:"Load More",ready:"Ready",scanning:"Scanning...",stopped:"Stopped",loadingMore:"Loading more...",noWorlds:"No worlds found.",play:"Play",info:"Info",loading:"Loading",playing:"Playing",failed:"Failed to load"},
enUK:{...this.enUS},de:{create:"Erstellen",search:"Suchen...",home:"Startseite",foryou:"FÃ¼r dich",settings:"Einstellungen",all:"Alle",multiplayer:"Mehrspieler",singleplayer:"Einzelspieler",your:"Deine",discover:"Entdecken",stop:"Stop",load:"Mehr laden",ready:"Bereit",scanning:"Scanne...",stopped:"Gestoppt",loadingMore:"Mehr laden...",noWorlds:"Keine Welten gefunden.",play:"Spielen",info:"Info",loading:"Lade",playing:"Spielt",failed:"Fehler beim Laden"},
fa:{create:"Ø§ÛŒØ¬Ø§Ø¯",search:"Ø¬Ø³ØªØ¬Ùˆ...",home:"Ø®Ø§Ù†Ù‡",foryou:"Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§",settings:"ØªÙ†Ø¸ÛŒÙ…Ø§Øª",all:"Ù‡Ù…Ù‡",multiplayer:"Ú†Ù†Ø¯ Ù†ÙØ±Ù‡",singleplayer:"ØªÚ© Ù†ÙØ±Ù‡",your:"Ø´Ù…Ø§",discover:"Ú©Ø§ÙˆØ´",stop:"ØªÙˆÙ‚Ù",load:"Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¨ÛŒØ´ØªØ±",ready:"Ø¢Ù…Ø§Ø¯Ù‡",scanning:"Ø¯Ø± Ø­Ø§Ù„ Ø§Ø³Ú©Ù†...",stopped:"ØªÙˆÙ‚Ù Ø´Ø¯",loadingMore:"Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¨ÛŒØ´ØªØ±...",noWorlds:"Ù‡ÛŒÚ† Ø¯Ù†ÛŒØ§ÛŒÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.",play:"Ø¨Ø§Ø²ÛŒ",info:"Ø§Ø·Ù„Ø§Ø¹Ø§Øª",loading:"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ",playing:"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø²ÛŒ",failed:"Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ú©Ø³Øª Ø®ÙˆØ±Ø¯"},
th:{create:"à¸ªà¸£à¹‰à¸²à¸‡",search:"à¸„à¹‰à¸™à¸«à¸²...",home:"à¸«à¸™à¹‰à¸²à¹à¸£à¸",foryou:"à¹€à¸à¸·à¹ˆà¸­à¸„à¸¸à¸“",settings:"à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²",all:"à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”",multiplayer:"à¸œà¸¹à¹‰à¹€à¸¥à¹ˆà¸™à¸«à¸¥à¸²à¸¢à¸„à¸™",singleplayer:"à¸œà¸¹à¹‰à¹€à¸¥à¹ˆà¸™à¸„à¸™à¹€à¸”à¸µà¸¢à¸§",your:"à¸‚à¸­à¸‡à¸„à¸¸à¸“",discover:"à¸„à¹‰à¸™à¸«à¸²",stop:"à¸«à¸¢à¸¸à¸”",load:"à¹‚à¸«à¸¥à¸”à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡",ready:"à¸à¸£à¹‰à¸­à¸¡",scanning:"à¸à¸³à¸¥à¸±à¸‡à¸ªà¹à¸à¸™...",stopped:"à¸«à¸¢à¸¸à¸”à¹à¸¥à¹‰à¸§",loadingMore:"à¹‚à¸«à¸¥à¸”à¹€à¸à¸´à¹ˆà¸¡...",noWorlds:"à¹„à¸¡à¹ˆà¸à¸šà¹‚à¸¥à¸",play:"à¹€à¸¥à¹ˆà¸™",info:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥",loading:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”",playing:"à¸à¸³à¸¥à¸±à¸‡à¹€à¸¥à¹ˆà¸™",failed:"à¹‚à¸«à¸¥à¸”à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ"},
hi:{create:"à¤¬à¤¨à¤¾à¤à¤",search:"à¤–à¥‹à¤œà¥‡à¤‚...",home:"à¤¹à¥‹à¤®",foryou:"à¤†à¤ªà¤•à¥‡ à¤²à¤¿à¤",settings:"à¤¸à¥‡à¤Ÿà¤¿à¤‚à¤—à¥à¤¸",all:"à¤¸à¤­à¥€",multiplayer:"à¤®à¤²à¥à¤Ÿà¥€à¤ªà¥à¤²à¥‡à¤¯à¤°",singleplayer:"à¤¸à¤¿à¤‚à¤—à¤²à¤ªà¥à¤²à¥‡à¤¯à¤°",your:"à¤†à¤ªà¤•à¤¾",discover:"à¤–à¥‹à¤œ",stop:"à¤°à¥‹à¤•à¥‡à¤‚",load:"à¤”à¤° à¤²à¥‹à¤¡ à¤•à¤°à¥‡à¤‚",ready:"à¤¤à¥ˆà¤¯à¤¾à¤°",scanning:"à¤¸à¥à¤•à¥ˆà¤¨ à¤•à¤° à¤°à¤¹à¤¾ à¤¹à¥ˆ...",stopped:"à¤°à¥‹à¤• à¤¦à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾",loadingMore:"à¤”à¤° à¤²à¥‹à¤¡ à¤•à¤° à¤°à¤¹à¥‡ à¤¹à¥ˆà¤‚...",noWorlds:"à¤•à¥‹à¤ˆ à¤¦à¥à¤¨à¤¿à¤¯à¤¾ à¤¨à¤¹à¥€à¤‚ à¤®à¤¿à¤²à¥€",play:"à¤–à¥‡à¤²à¥‡à¤‚",info:"à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€",loading:"à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ",playing:"à¤–à¥‡à¤² à¤°à¤¹à¥‡ à¤¹à¥ˆà¤‚",failed:"à¤²à¥‹à¤¡ à¤µà¤¿à¤«à¤²"},
zh:{create:"åˆ›å»º",search:"æœç´¢...",home:"é¦–é¡µ",foryou:"ä¸ºä½ æ¨è",settings:"è®¾ç½®",all:"æ‰€æœ‰",multiplayer:"å¤šäººæ¸¸æˆ",singleplayer:"å•äººæ¸¸æˆ",your:"ä½ çš„",discover:"å‘ç°",stop:"åœæ­¢",load:"åŠ è½½æ›´å¤š",ready:"å‡†å¤‡å°±ç»ª",scanning:"æ‰«æä¸­...",stopped:"å·²åœæ­¢",loadingMore:"åŠ è½½æ›´å¤š...",noWorlds:"æœªæ‰¾åˆ°ä¸–ç•Œ",play:"å¼€å§‹",info:"ä¿¡æ¯",loading:"åŠ è½½ä¸­",playing:"æ¸¸æˆä¸­",failed:"åŠ è½½å¤±è´¥"},
ko:{create:"ë§Œë“¤ê¸°",search:"ê²€ìƒ‰...",home:"í™ˆ",foryou:"ì¶”ì²œ",settings:"ì„¤ì •",all:"ì „ì²´",multiplayer:"ë©€í‹°í”Œë ˆì´",singleplayer:"ì‹±ê¸€í”Œë ˆì´",your:"ë‚´ ê²ƒ",discover:"ê²€ìƒ‰",stop:"ì¤‘ì§€",load:"ë” ë¶ˆëŸ¬ì˜¤ê¸°",ready:"ì¤€ë¹„",scanning:"ìŠ¤ìº” ì¤‘...",stopped:"ì¤‘ì§€ë¨",loadingMore:"ë” ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...",noWorlds:"ì„¸ê³„ ì—†ìŒ",play:"í”Œë ˆì´",info:"ì •ë³´",loading:"ë¡œë”© ì¤‘",playing:"í”Œë ˆì´ ì¤‘",failed:"ì‹¤íŒ¨"},
ja:{create:"ä½œæˆ",search:"æ¤œç´¢...",home:"ãƒ›ãƒ¼ãƒ ",foryou:"ãŠã™ã™ã‚",settings:"è¨­å®š",all:"ã™ã¹ã¦",multiplayer:"ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼",singleplayer:"ã‚·ãƒ³ã‚°ãƒ«ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼",your:"ã‚ãªãŸã®",discover:"æ¤œç´¢",stop:"åœæ­¢",load:"ã‚‚ã£ã¨èª­ã¿è¾¼ã‚€",ready:"æº–å‚™å®Œäº†",scanning:"ã‚¹ã‚­ãƒ£ãƒ³ä¸­...",stopped:"åœæ­¢",loadingMore:"ã•ã‚‰ã«èª­ã¿è¾¼ã¿...",noWorlds:"ãƒ¯ãƒ¼ãƒ«ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“",play:"ãƒ—ãƒ¬ã‚¤",info:"æƒ…å ±",loading:"èª­ã¿è¾¼ã¿ä¸­",playing:"ãƒ—ãƒ¬ã‚¤ä¸­",failed:"èª­ã¿è¾¼ã¿å¤±æ•—"},
nl:{create:"Maken",search:"Zoeken...",home:"Home",foryou:"Voor jou",settings:"Instellingen",all:"Alles",multiplayer:"Multiplayer",singleplayer:"Singleplayer",your:"Jouw",discover:"Ontdekken",stop:"Stop",load:"Meer laden",ready:"Klaar",scanning:"Scannen...",stopped:"Gestopt",loadingMore:"Meer laden...",noWorlds:"Geen werelden gevonden",play:"Spelen",info:"Info",loading:"Laden",playing:"Spelen",failed:"Mislukt"},
nlBE:{...this.nl},es:{create:"Crear",search:"Buscar...",home:"Inicio",foryou:"Para ti",settings:"Ajustes",all:"Todos",multiplayer:"Multijugador",singleplayer:"Un jugador",your:"Tus",discover:"Descubrir",stop:"Detener",load:"Cargar mÃ¡s",ready:"Listo",scanning:"Escaneando...",stopped:"Detenido",loadingMore:"Cargando mÃ¡s...",noWorlds:"No se encontraron mundos",play:"Jugar",info:"Info",loading:"Cargando",playing:"Jugando",failed:"Error"},
fr:{create:"CrÃ©er",search:"Rechercher...",home:"Accueil",foryou:"Pour vous",settings:"ParamÃ¨tres",all:"Tous",multiplayer:"Multijoueur",singleplayer:"Solo",your:"Votre",discover:"DÃ©couvrir",stop:"ArrÃªter",load:"Charger plus",ready:"PrÃªt",scanning:"Analyse...",stopped:"ArrÃªtÃ©",loadingMore:"Chargement...",noWorlds:"Aucun monde trouvÃ©",play:"Jouer",info:"Info",loading:"Chargement",playing:"En cours",failed:"Ã‰chec"},
it:{create:"Crea",search:"Cerca...",home:"Home",foryou:"Per te",settings:"Impostazioni",all:"Tutti",multiplayer:"Multigiocatore",singleplayer:"Singolo",your:"Tuo",discover:"Scopri",stop:"Ferma",load:"Carica altro",ready:"Pronto",scanning:"Scansione...",stopped:"Fermato",loadingMore:"Caricamento...",noWorlds:"Nessun mondo trovato",play:"Gioca",info:"Info",loading:"Caricamento",playing:"In gioco",failed:"Fallito"},
pt:{create:"Criar",search:"Pesquisar...",home:"InÃ­cio",foryou:"Para vocÃª",settings:"ConfiguraÃ§Ãµes",all:"Todos",multiplayer:"Multijogador",singleplayer:"Singleplayer",your:"Seu",discover:"Descobrir",stop:"Parar",load:"Carregar mais",ready:"Pronto",scanning:"Verificando...",stopped:"Parado",loadingMore:"Carregando mais...",noWorlds:"Nenhum mundo encontrado",play:"Jogar",info:"Info",loading:"Carregando",playing:"Jogando",failed:"Falhou"},
ru:{create:"Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ",search:"ĞŸĞ¾Ğ¸ÑĞº...",home:"Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ",foryou:"Ğ”Ğ»Ñ Ğ²Ğ°Ñ",settings:"ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸",all:"Ğ’ÑĞµ",multiplayer:"ĞœÑƒĞ»ÑŒÑ‚Ğ¸Ğ¿Ğ»ĞµĞµÑ€",singleplayer:"ĞĞ´Ğ¸Ğ½Ğ¾Ñ‡Ğ½Ğ°Ñ Ğ¸Ğ³Ñ€Ğ°",your:"Ğ’Ğ°ÑˆĞ¸",discover:"ĞĞ±Ğ·Ğ¾Ñ€",stop:"Ğ¡Ñ‚Ğ¾Ğ¿",load:"Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ ĞµÑ‰Ñ‘",ready:"Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾",scanning:"Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ...",stopped:"ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾",loadingMore:"Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°...",noWorlds:"ĞœĞ¸Ñ€Ğ¾Ğ² Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾",play:"Ğ˜Ğ³Ñ€Ğ°Ñ‚ÑŒ",info:"Ğ˜Ğ½Ñ„Ğ¾",loading:"Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°",playing:"Ğ˜Ğ³Ñ€Ğ°ĞµĞ¼",failed:"ĞÑˆĞ¸Ğ±ĞºĞ°"}};

function t(k){return translations[currentLang][k]||translations.enUS[k]||k}

function setLanguage(l){currentLang=l;document.documentElement.lang=l;document.documentElement.dir=l==='fa'?'rtl':'ltr';document.querySelector('.create-btn').textContent=t('create');document.getElementById('searchInput').placeholder=t('search');const n=document.querySelectorAll('.nav-icon');n[0].textContent=t('home');n[1].textContent=t('foryou');n[2].textContent=t('settings');['all','multiplayer','singleplayer','your'].forEach(c=>document.querySelector(`[data-cat="${c}"]`).textContent=t(c));const b=document.querySelectorAll('.btn');b[0].textContent=t('discover');b[1].textContent=t('stop');document.querySelector('.btn.primary').textContent=t('load');scanStatus.textContent=t('ready');footer.textContent='Made by Raybod - Hergestellt von Raybodï¸';renderGrid()}

const browserLang=navigator.language||navigator.userLanguage;if(translations[browserLang])setLanguage(browserLang);else if(browserLang.startsWith('en'))setLanguage('enUS');else setLanguage('enUS');

function setCategory(c,el){activeCategory=c;document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));if(el)el.classList.add('active');renderGrid()}
function applyFilters(){searchQuery=document.getElementById('searchInput').value.trim().toLowerCase();renderGrid()}
function createGame(){alert('Create game flow placeholder')}
function goHome(){}
function forYou(){}
function openSettings(){alert('Settings placeholder')}

function makeCard(m){const c=document.createElement('div');c.className='card';c.dataset.id=m.id;const i=document.createElement('img');i.className='thumb';i.src=`${BACKEND_URL}/${m.id}/${m.image||'cover.png'}`;i.alt=m.name;i.onerror=()=>{i.src=`${BACKEND_URL}/default-cover.png`};const b=document.createElement('div');b.className='card-body';const inf=document.createElement('div');inf.className='card-info';const t1=document.createElement('div');t1.className='card-title';t1.textContent=m.name||`Game ${m.id}`;const t2=document.createElement('div');t2.className='card-sub';t2.textContent=`ID: ${m.id}${m.tags?' â€¢ '+m.tags.join(','):''}`;const a=document.createElement('div');a.className='card-actions';const p=document.createElement('button');p.className='play';p.textContent=t('play');p.onclick=()=>openInPlayArea(m);const infoBtn=document.createElement('button');infoBtn.className='info';infoBtn.textContent=t('info');infoBtn.onclick=()=>showInfo(m);a.append(p,infoBtn);inf.append(t1,t2);b.append(inf,a);c.append(i,b);return c}

function renderGrid(){grid.innerHTML='';const items=Array.from(discovered.values()).filter(m=>{if(activeCategory==='multiplayer'&&!m.tags?.includes('multiplayer'))return false;if(activeCategory==='singleplayer'&&!m.tags?.includes('singleplayer'))return false;if(activeCategory==='your'&&m.owner!=='you')return false;if(searchQuery){const s=searchQuery;return(m.name?.toLowerCase().includes(s))||String(m.id).includes(s)||m.tags?.some(x=>x.includes(s))}return true}).sort((a,b)=>(a.name||'').localeCompare(b.name||''));if(items.length===0){grid.innerHTML=`<div style="color:var(--muted);padding:20px">${t('noWorlds')}</div>`;return}items.forEach(m=>grid.appendChild(makeCard(m)))}

function openInPlayArea(m){rightStatus.textContent=`${t('loading')} ${m.name||m.id}...`;const f=document.createElement('iframe');f.src=`${BACKEND_URL}/${m.id}/${m.entry||'index.html'}`;f.onload=()=>{rightStatus.textContent=`${t('playing')} ${m.name||m.id}`};f.onerror=()=>{rightStatus.textContent=`${t('failed')} ${m.id}`};const c=document.getElementById('playFrame');c.innerHTML='';c.appendChild(f)}
function showInfo(m){alert(`Name: ${m.name||m.id}\nID: ${m.id}\nTags: ${(m.tags||[]).join(', ')}\nEntry: ${m.entry}`)}

async function probeId(id){try{const r=await fetch(`${BACKEND_URL}/${id}/meta.json`,{cache:'no-store'});if(!r.ok)throw 0;const m=await r.json();m.id=m.id??id;m.name=m.name??`Game ${m.id}`;m.image=m.image??'cover.png';m.entry=m.entry??'index.html';m.tags=m.tags??[];if(!discovered.has(String(m.id))){discovered.set(String(m.id),m);renderGrid()}return true}catch(e){return false}}

async function runScannerBatch(){let i=0;function next(){if(i>=triesPerBatch)return Promise.resolve();i++;const id=Math.floor(Math.random()*MAX_ID);return probeId(id).finally(()=>{})}await Promise.all(new Array(concurrency).fill(0).map(async()=>{while(i<triesPerBatch){await next();await new Promise(r=>setTimeout(r,10))}}));scanStatus.textContent=t('ready')}

function startScan(){if(scanning)return;scanning=true;scanStatus.textContent=t('scanning');runScannerBatch().finally(()=>scanning=false)}
function stopScan(){scanning=false;scanStatus.textContent=t('stopped')}
function loadMore(){triesPerBatch+=20;scanStatus.textContent=t('loadingMore');runScannerBatch()}

setLanguage(currentLang);
</script>
</body>
</html>
